angular.module("ng.httpLoader",["ng.httpLoader.httpMethodInterceptor"]).directive("ngHttpLoader",["$rootScope","$parse","$timeout",function(e,t,n){return{scope:{methods:"@",template:"@",title:"@",ttl:"@"},template:'<div class="http-loader__wrapper" '+'ng-include="template" '+'ng-show="showLoader"></div>',link:function(r){var i=t(r.methods)()||r.methods;i=angular.isUndefined(i)?[]:i;i=angular.isArray(i)?i:[i];angular.forEach(i,function(e,t){i[t]=e.toUpperCase()});var s=t(r.ttl)()||r.ttl;s=angular.isUndefined(s)?0:s;s=Number(s)*1e3;s=angular.isNumber(s)?s:0;if(!Array.prototype.indexOf){i.indexOf=function(e){for(var t=this.length;t--;){if(this[t]===e){return t}}return-1}}r.showLoader=false;var o,u=r.showLoader;var a=function(e,t){if(i.indexOf(t.toUpperCase())!==-1){u=e.name==="loaderShow"}else if(i.length===0){u=e.name==="loaderShow"}if(s<=0||!o&&!u){r.showLoader=u;return}else if(o){return}r.showLoader=u;o=n(function(){if(!u){r.showLoader=u}o=undefined},s)};e.$on("loaderShow",a);e.$on("loaderHide",a)}}}]);angular.module("ng.httpLoader.httpMethodInterceptor",[]).provider("httpMethodInterceptor",function(){var e=[];var t=[];var n="";this.whitelistDomain=function(t){e.push(t)};this.requestType=function(e){t.push(e)};this.headerName=function(e){n=e};this.$get=["$q","$rootScope",function(r,i){var s=0;var o=function(t){for(var n=e.length;n--;){if(t.indexOf(e[n])!==-1){return true}}return false};var u=function(e){for(var r=t.length;r--;){if(e[n].indexOf(t[r])!==-1){return true}}return false};var a=function(e){if(o(e.url)&&u(e.headers)&&--s===0){i.$emit("loaderHide",e.method)}};return{request:function(e){if(o(e.url)&&u(e.headers)){s++;i.$emit("loaderShow",e.method)}return e||r.when(e)},response:function(e){a(e.config);return e||r.when(e)},responseError:function(e){a(e.config);return r.reject(e)}}}]}).config(["$httpProvider",function(e){e.interceptors.push("httpMethodInterceptor")}])
